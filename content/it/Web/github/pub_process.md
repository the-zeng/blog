---
title: 記事を公開するまでのフロー 
draft: true
---

## 前提
blogを執筆するメンバー

- 自分1人
- 仲のよい数人(社内blogみたいな)
- オープン(Qiita的なサービス)

これらによって，使用するbranchの数，レポジトリの数が変わってくると思いますが，できるだけすべてに対応できる方法を考えていきたいと思います．

## 公開のタイミング
まずはゴールから考えていきましょう．

「master branchは常に公開されている」
という状態にしましょう．

では，masterにmergeするときのワークフローを考えます．

## 考えうるcommit
blog的なサービスをつくる上で考えられるcommitを次の3つに分けます．
- 機能自体の変更
- 記事の投稿
- 投稿した記事の編集

## 記事が完成するまで
記事を実際に書くときの流れを考えてみます．
1つの記事を一気に書き上げられる人もいるかもしれませんが，私はムリです．
いくつかの記事のファイルを複数開き，完成させられそうなところから徐々に完成させていくスタイルです．

さて，フローがみやすいのは，「1記事1branch」という制限だと思います．

しかし，この方法だといくつかの記事を同時平行で進めたいときにいちいち"gitcheckout"という操作が必要になります．

VScodeで編集しているのですが，できれば書きかけの記事は全て横のtabに現れてほしいです．
また，１つのPCだけで編集するとも限らないのでgitにpushしたいです．

まず思いつくのはdraft用のbranchを作成することです．

masterに執筆中の記事がdraftとして置いてあるのは許せる？
→できればmasterは完成状態だけにしたい．
ただ，あまり複雑になってもいけないのでdevelopブランチぐらいには．

### 手元での実験環境
Hugoを使う場合，
```yaml
draft: true
```
とFront Matterに書いておくと，/publicに出力されません．

そうは言ってもどのように現れるかをみたいときは
```sh
hugo server -D
```
と-Dオプションをつけるとdraftを含め表示してくれます．